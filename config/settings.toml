# CAM Configuration
# Edit values here. Reload from the dashboard without restarting.
# Environment variables override: CAM_<SECTION>_<KEY> (e.g. CAM_DASHBOARD_PORT=9090)

[dashboard]
host = "0.0.0.0"
port = 8080
log_level = "info"
heartbeat_check_interval = 10      # seconds between heartbeat sweeps
heartbeat_timeout = 120             # fallback offline threshold (seconds)
agent_dispatch_timeout = 120        # max wait for agent task response (seconds)
default_event_count = 200           # events sent to dashboard on connect

[orchestrator]
poll_interval = 1.0                 # seconds between queue checks when idle

[health]
heartbeat_interval = 30.0           # expected seconds between agent heartbeats
missed_heartbeat_threshold = 3      # consecutive misses before marking offline
success_rate_threshold = 75.0       # below this % -> yellow health indicator

[events]
max_events = 1000                   # in-memory event log capacity

[analytics]
db_path = "data/analytics.db"

[models]
ollama_url = "http://localhost:11434"

[models.routing]
simple = "glm-4.7-flash"
routine = "gpt-oss:20b"
agentic = "kimi-k2.5"
complex = "claude"
nuanced = "claude"
# Tier-based routing (auto-classifier â†’ task_classifier.py)
# Tier 1 = small/fast, Tier 2 = medium, Tier 3 = large/reasoning
tier1 = "phi4-mini:3.8b"          # small/fast local model for simple tasks
tier2 = "gpt-oss:20b"
tier3 = "glm-4.7-flash"

[models.costs.claude]
input = 3.00                        # USD per million input tokens
output = 15.00                      # USD per million output tokens

[models.costs."kimi-k2.5"]
input = 0.50
output = 1.50

[commands]
status_report = 30
system_info = 30
restart_service = 60
run_diagnostic = 90
capture_sensor_data = 45

[connector]
heartbeat_interval = 30
reconnect_delay = 3
dashboard_host = "192.168.12.232"
dashboard_port = 8080
systemctl_timeout = 30

[notifications]
enabled = true                      # master toggle for the notification system
max_history = 200                   # max notifications kept in memory
agent_disconnect = true             # alert when an agent goes offline
task_failure = true                 # alert when a task fails
kill_switch = true                  # alert when the kill switch is activated
high_error_rate = true              # alert when task error rate exceeds threshold
error_rate_threshold = 50.0         # error rate % that triggers an alert
error_rate_window = 20              # number of recent tasks to evaluate
cost_threshold = true               # alert when cumulative model cost exceeds limit
cost_threshold_usd = 1.00           # USD threshold for cost alert

[file_transfer]
chunk_size = 65536                  # bytes per chunk before base64 encoding
max_file_size = 52428800            # 50 MB max file size
receive_dir = "data/transfers"      # server-side directory for received files
agent_receive_dir = "~/receive"     # default agent-side receive directory
max_active_transfers = 5            # max concurrent transfers
history_size = 100                  # completed transfer history ring buffer

[scheduler]
check_interval = 30                 # seconds between schedule checks
persist_file = "data/schedules.json"  # schedule persistence file

[memory]
short_term_max_messages = 200       # max messages before summarization kicks in
short_term_summary_ratio = 0.5      # keep newest 50% of messages when summarizing
working_memory_path = "data/tasks/working_memory.json"  # persistent task state file
long_term_persist_dir = "data/memory/chromadb"           # ChromaDB vector store location
long_term_collection = "cam_long_term"                   # ChromaDB collection name
long_term_seed_file = "CAM_BRAIN.md"                     # seed knowledge file for first startup
episodic_db_path = "data/memory/episodic.db"              # SQLite database for conversation history
episodic_retention_days = 365                              # how long to keep episodic records

[api]
api_key = ""                        # Set a key to require X-API-Key header. Empty = open access.

[telegram]
bot_token = ""                      # From @BotFather. Empty = bot disabled.
allowed_chat_ids = []               # George's chat_id(s). Integer list.
poll_interval = 0.5                 # seconds between task result checks
task_timeout = 120.0                # seconds to wait for task result

[content_calendar]
db_path = "data/content_calendar.db"  # SQLite database for content pipeline
